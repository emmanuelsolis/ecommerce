function MF_Line(){var thisClass=this;thisClass.NAME="MF_Line";thisClass.LABEL="Line";thisClass.GENONLY=false;thisClass.TRANSFORM=true;thisClass.VRESIZE=false;thisClass.HRESIZE=false;thisClass.USEFONT=false;thisClass.ANNOTATION=false;thisClass.MULTILINE=false;thisClass.EDITABLE=false;thisClass.AUTOSIZE=false;thisClass.HIDE=true;thisClass.USEPAGE=true;thisClass.RENDER_ON_MOVE=false;thisClass.RENDER_ON_RESIZE=true;thisClass.RENDER=true;thisClass.ALLOW_MULTILINK=false;thisClass.x=0;thisClass.y=0;thisClass.width=100;thisClass.height=100;thisClass.eangle=0;thisClass.eid="";thisClass.lid="";thisClass.transformLock=false;thisClass.e2xml=new MF_ComponentXML(this);thisClass.selector=null;thisClass.ecoordinates=null;thisClass.esize=null;thisClass.prevEcoordinates=null;thisClass.prevEsize=null;thisClass.GROUPID="";thisClass.delta=0;thisClass.linkType="";thisClass.link="";thisClass.linkObj=null;thisClass.templateID="";thisClass.startX=0;thisClass.startY=0;thisClass.endX=0;thisClass.endY=0;thisClass.startType="topRight";thisClass.borderColor="#000000";thisClass.borderWidth=2;thisClass.borderType="solid";thisClass.shadowType="none";thisClass.setVisible=function(val){thisClass.visible=val;if(val){$("#"+thisClass.eid).show();}else{$("#"+thisClass.eid).hide();}};thisClass.getVisible=function(){return thisClass.visible;};thisClass.transformSelector=function(){thisClass.selector.transform(thisClass);};thisClass.computePoints=function(){var obj=MF_Utils.computePoints(thisClass.startType,thisClass.x+thisClass.delta,thisClass.y+thisClass.delta,thisClass.width-(thisClass.delta*2),thisClass.height-(thisClass.delta*2));thisClass.startX=obj.startx;thisClass.startY=obj.starty;thisClass.endX=obj.endx;thisClass.endY=obj.endy;};thisClass.exml=function(){return thisClass.e2xml.formXML();};thisClass.setDefaultSettings=function(){thisClass.e2xml.addPropSingle("ANNOTATION",thisClass.ANNOTATION,"default");thisClass.e2xml.addPropSingle("shadowType",thisClass.shadowType,"default");thisClass.e2xml.addPropSingle("borderColor",thisClass.borderColor,"default");thisClass.e2xml.addPropSingle("borderWidth",thisClass.borderWidth,"default");thisClass.e2xml.addPropSingle("borderType",thisClass.borderType,"default");};thisClass.getValues=function(){if(thisClass.e2xml.settings.properties.ANNOTATION!=null){thisClass.ANNOTATION=thisClass.e2xml.settings.properties.ANNOTATION;}if(thisClass.e2xml.settings.properties.shadowType!=null){thisClass.shadowType=thisClass.e2xml.settings.properties.shadowType;}if(thisClass.e2xml.settings.properties.borderColor!=null){thisClass.borderColor=thisClass.e2xml.settings.properties.borderColor;}if(thisClass.e2xml.settings.properties.borderWidth!=null){thisClass.borderWidth=thisClass.e2xml.settings.properties.borderWidth;}if(thisClass.e2xml.settings.properties.borderType!=null){thisClass.borderType=thisClass.e2xml.settings.properties.borderType;}};thisClass.render=function(redraw,mfpage){if(thisClass.GENONLY){return;}if(!thisClass.RENDER){return;}if(redraw==null){redraw=true;}MF_ComponentUtils.setDimensionsTransform(thisClass,thisClass.ecoordinates,thisClass.esize);thisClass.getValues();thisClass.delta=10;try{thisClass.delta=thisClass.delta+MF_ComponentUtils.computeShadowDelta(thisClass.shadowType);}catch(e){}var rectDim=MF_Utils.calculateDimensions(thisClass.startX,thisClass.startY,thisClass.endX,thisClass.endY,thisClass.delta);thisClass.startType=rectDim.startType;var cvsCode="";var cwidth=rectDim.width+(thisClass.delta*2);var cheight=rectDim.height+(thisClass.delta*2);var ctop=rectDim.y-thisClass.delta;var cleft=rectDim.x-thisClass.delta;thisClass.x=cleft;thisClass.y=ctop;thisClass.width=cwidth;thisClass.height=cheight;if(redraw){$("#"+thisClass.eid).remove();cvsCode=cvsCode+"<canvas class='mfWFCompCls'  id=\""+thisClass.eid+'" width="'+(cwidth).toString()+'" height="'+(cheight).toString()+'" style="-webkit-transform: translateZ(0);  pointer-events: none; position:absolute; width:'+(cwidth).toString()+"px; height:"+(cheight).toString()+"px; top:"+(ctop).toString()+"px; left:"+(cleft).toString()+'px; " > ';cvsCode=cvsCode+"</canvas>";if(mfpage){$("#mfPage"+mfpage.eid).append(cvsCode);}else{$("#mfPage"+mf_main.editorController.page.eid).append(cvsCode);}try{mf_main.editorController.postAddToPage(thisClass.eid);}catch(e){}}else{MF_ComponentUtils.clearPage(thisClass);}var ctx_Cvs=(document.getElementById(thisClass.eid)).getContext("2d");MF_ComponentUtils.setComponentShadow(ctx_Cvs,thisClass.shadowType);if(!ctx_Cvs.setLineDash){ctx_Cvs.setLineDash=function(){};}if(thisClass.borderType=="dashed"){ctx_Cvs.setLineDash([thisClass.borderWidth*2,4]);}if(thisClass.borderType=="dotted"){ctx_Cvs.setLineDash([thisClass.borderWidth,2]);}ctx_Cvs.fillStyle=MF_ComponentUtils.hexToRGB(thisClass.borderColor,1);var thickness=thisClass.borderWidth;thickness=parseInt(thickness);if(Math.abs(thickness%2)==1){ctx_Cvs.translate(0.5,0.5);}ctx_Cvs.lineWidth=thickness;ctx_Cvs.strokeStyle=MF_ComponentUtils.hexToRGB(thisClass.borderColor,1);ctx_Cvs.beginPath();ctx_Cvs.moveTo(rectDim.startx,rectDim.starty);ctx_Cvs.lineTo(rectDim.endx,rectDim.endy);ctx_Cvs.stroke();if(thisClass.selector){thisClass.selector.transform(thisClass);}};}function MF_LineSettings(){var thisClass=this;thisClass.eid=mf_main.editorController.guidGenerator();thisClass.transformLock=false;thisClass.component=null;thisClass.selector=null;thisClass.RENDERDOM=true;thisClass.showSetting=true;thisClass.borderSettings=null;thisClass.linkSettings=null;thisClass.shadowSettings=null;thisClass.remove=function(delSet){$("#"+thisClass.eid).hide();if(delSet){try{if(mf_main.MEMFREE){thisClass.borderSettings.remove();thisClass.linkSettings.remove();thisClass.shadowSettings.remove();}}catch(e){console.log("error occured in the component MF_Line.js");}$("#"+thisClass.eid).remove();}};thisClass.setValues=function(){if(thisClass.RENDERDOM){thisClass.render();thisClass.borderSettings=new MF_BorderSettings2();thisClass.borderSettings.init(thisClass);thisClass.linkSettings=new MF_LinkSettings();thisClass.linkSettings.init(thisClass);thisClass.shadowSettings=new MF_ShadowSettings();thisClass.shadowSettings.init(thisClass);}else{thisClass.borderSettings.init(thisClass);thisClass.linkSettings.init(thisClass);thisClass.shadowSettings.init(thisClass);thisClass.setupEvents();$("#"+thisClass.eid).show();}};thisClass.updateTransform=function(noscale){};thisClass.setupEvents=function(){if(thisClass.RENDERDOM){MF_ComponentSettingUtils.setupToggle(thisClass);$("#mfVStraight_"+thisClass.eid).on("click",function(e){e.stopImmediatePropagation();var coord=new Object();coord.startX=thisClass.component.ecoordinates.startX;coord.startY=thisClass.component.ecoordinates.startY;coord.endX=thisClass.component.ecoordinates.endX;coord.endY=thisClass.component.ecoordinates.endY;var undo=new MF_UndoDAO();undo.propObjectUndo(thisClass.component,"ecoordinates",thisClass.component.ecoordinates);MF_ChangeManager.addUndo(undo);var startX=thisClass.component.ecoordinates.startX;var startY=thisClass.component.ecoordinates.startY;var endX=thisClass.component.ecoordinates.endX;var endY=thisClass.component.ecoordinates.endY;if(startX==endX){return;}var linedistance=Math.sqrt(Math.pow(endX-startX,2)+Math.pow(endY-startY,2));if(startY<endY){coord.endX=thisClass.component.ecoordinates.startX;coord.endY=thisClass.component.ecoordinates.startY+linedistance;}else{coord.startX=thisClass.component.ecoordinates.endX;coord.startY=thisClass.component.ecoordinates.endY+linedistance;}thisClass.component.e2xml.addPropObject("ecoordinates",coord);thisClass.component.render(false);mf_main.editorController.addSelectorTransform(thisClass.component.selector);});$("#mfHStraight_"+thisClass.eid).on("click",function(e){e.stopImmediatePropagation();var coord=new Object();coord.startX=thisClass.component.ecoordinates.startX;coord.startY=thisClass.component.ecoordinates.startY;coord.endX=thisClass.component.ecoordinates.endX;coord.endY=thisClass.component.ecoordinates.endY;var startX=thisClass.component.ecoordinates.startX;var startY=thisClass.component.ecoordinates.startY;var endX=thisClass.component.ecoordinates.endX;var endY=thisClass.component.ecoordinates.endY;var linedistance=Math.sqrt(Math.pow(endX-startX,2)+Math.pow(endY-startY,2));if(startY==endY){return;}if(startX<endX){coord.endY=thisClass.component.ecoordinates.startY;coord.endX=thisClass.component.ecoordinates.startX+linedistance;}else{coord.startY=thisClass.component.ecoordinates.endY;coord.startX=thisClass.component.ecoordinates.endX+linedistance;}thisClass.component.e2xml.addPropObject("ecoordinates",coord);thisClass.component.render(false);mf_main.editorController.addSelectorTransform(thisClass.component.selector);});$(".mfBtnLineStraightCls").tooltip({position:"top",animation:false});$("#mfAnnotateToggleBtn_"+thisClass.eid).on("click",thisClass.toggleAnnotation);}if(thisClass.RENDERDOM==true){thisClass.RENDERDOM=false;}if(thisClass.component.ANNOTATION){thisClass.markAsAnnotate();}else{thisClass.unMarkAsAnnotate();}};thisClass.toggleAnnotation=function(e){if(thisClass.component){if(thisClass.component.ANNOTATION){thisClass.unMarkAsAnnotate();thisClass.component.e2xml.addPropSingle("ANNOTATION",false);}else{thisClass.markAsAnnotate();thisClass.component.e2xml.addPropSingle("ANNOTATION",true);}$("#mfAnnotateToggleBtn_"+thisClass.eid).tooltip("hide");}};thisClass.markAsAnnotate=function(){$("#mfAnnotateToggleBtn_"+thisClass.eid).css("color","#ff0000");$("#mfAnnotateToggleBtn_"+thisClass.eid).attr("data-original-title","Unmark component as 'Annotation'. Annotation components can be toggled - shown/hidden in review mode.");};thisClass.unMarkAsAnnotate=function(){$("#mfAnnotateToggleBtn_"+thisClass.eid).css("color","#8C95A4");$("#mfAnnotateToggleBtn_"+thisClass.eid).attr("data-original-title","Mark component as 'Annotation'. Annotation components can be toggled - shown/hidden in review mode.");};thisClass.render=function(redraw,mfpage){if(redraw==null){redraw=true;}var htmlCode="";if(redraw){$("#"+thisClass.eid).remove();htmlCode=multiline(function(){
/*!
				
					
					<div class="mfComponentSetting" id="{{eid}}" style=" position: relative; display: none; width:250px; height: 850px; overflow: hidden; " >
					<div  style="overflow: hidden;  width:100%; height: 100%;" >
					
					
						<div id="{{eid}}_builtin"  style="overflow: hidden; width:100%; " >
					
								<div id="{{eid}}_settingToggle"  class="mfImgLink mfSettingsToggleBtn" style=" " >
				
									<div style="float: left; width: 185px; padding-left: 5px;">Line</div>
									
									<div style="float: left; width: 50px; text-align: right;">
										<span id="{{eid}}_settingToggleHide"  style="display: none; font-size: 20px;" class="ico-angle-right"></span>
										<span id="{{eid}}_settingToggleShow"  style="font-size: 20px;" class="ico-angle-down"></span>
									</div>
								</div>
								
								
										
								<div id="{{eid}}_partSetting" style="overflow: hidden; position: relative; width:100%; height: 80px;" >		
					
								
											<div  style="left: 10px; top: 20px; width: 170px; font-weight: bold; overflow: hidden; word-wrap: false;position:absolute"> 
			
												<div style="overflow:hidden">
													<span id="mfVStraight_{{eid}}"  title="Make Line Vertical Straight" class="mfBtnLineStraightCls ico-flip_horizontal" style="cursor: pointer; font-size: 30px; color: #444;"></span>
													&nbsp; &nbsp; 
													<span id="mfHStraight_{{eid}}"  title="Make Line Horizontal Straight" class="mfBtnLineStraightCls ico-flip_vertical" style="cursor: pointer; font-size: 30px; color: #444;"></span>
												</div>
									
											</div>
											
											<span class="ico-border_color" data-toggle="tooltip"  data-placement="bottom"   id="mfAnnotateToggleBtn_{{eid}}" style="position: absolute; font-size: 18px; cursor:pointer; left: 110px; top: 25px;"></span>

								
								
								</div>
						</div>
						
						<div id="{{eid}}_link"  style="overflow: hidden; width:100%; " >
							
						</div>
						
						<div id="{{eid}}_border"  style="overflow: hidden; width:100%; " >
							
						</div>
						
						<div id="{{eid}}_shadow"  style="overflow: hidden; width:100%; " >
							
						</div>
					
					
					
					</div></div>
					 
				
				*/
console.log;});var compiled_template=Handlebars.compile(htmlCode);var context={eid:thisClass.eid};var compiled_code=compiled_template(context);$("#mfComponentSettings").append(compiled_code);thisClass.setupEvents();$("#"+thisClass.eid).show();}else{$("#"+thisClass.eid).css("left",thisClass.x);$("#"+thisClass.eid).css("top",thisClass.y);}};}