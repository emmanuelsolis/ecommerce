function MF_Grid(){var thisClass=this;thisClass.NAME="MF_Grid";thisClass.LABEL="Grid";thisClass.GENONLY=false;thisClass.TRANSFORM=false;thisClass.VRESIZE=false;thisClass.HRESIZE=false;thisClass.USEFONT=false;thisClass.ANNOTATION=false;thisClass.MULTILINE=false;thisClass.EDITABLE=false;thisClass.AUTOSIZE=false;thisClass.HIDE=true;thisClass.USEPAGE=true;thisClass.RENDER_ON_MOVE=false;thisClass.RENDER_ON_RESIZE=true;thisClass.RENDER=true;thisClass.templateID="";thisClass.ALLOW_MULTILINK=false;thisClass.x=0;thisClass.y=0;thisClass.width=400;thisClass.height=500;thisClass.eangle=0;thisClass.eid="";thisClass.lid="";thisClass.transformLock=false;thisClass.e2xml=new MF_ComponentXML(this);thisClass.selector=null;thisClass.ecoordinates=null;thisClass.prevEcoordinates=null;thisClass.prevEsize=null;thisClass.esize=null;thisClass.GROUPID="";thisClass.delta=0;thisClass.linkType="";thisClass.link="";thisClass.linkObj=null;thisClass.layoutJSON={gridLayout:[{id:MF_Utils.guidGenerator(),type:"horizontal",widthValue:"100",widthUnit:"%",heightValue:"100",heightUnit:"%",border:true,children:[{id:MF_Utils.guidGenerator(),type:"vertical",widthValue:"30",widthUnit:"%",heightValue:"100",heightUnit:"%",border:true,children:[]},{id:MF_Utils.guidGenerator(),type:"vertical",widthValue:"70",widthUnit:"%",heightValue:"100",heightUnit:"%",border:true,children:[]}]}]};thisClass.setVisible=function(val){thisClass.visible=val;if(val){$("#"+thisClass.eid).show();}else{$("#"+thisClass.eid).hide();}};thisClass.getVisible=function(){return thisClass.visible;};thisClass.exml=function(){return thisClass.e2xml.formXML();};thisClass.setDefaultSettings=function(){thisClass.e2xml.addPropSingle("ANNOTATION",thisClass.ANNOTATION,"default");var layoutString=JSON.stringify(thisClass.layoutJSON);thisClass.e2xml.addPropSingle("gridLayout",layoutString,"default");};thisClass.getValues=function(){if(thisClass.e2xml.settings.properties.ANNOTATION!=null){thisClass.ANNOTATION=thisClass.e2xml.settings.properties.ANNOTATION;}if(thisClass.e2xml.settings.properties.gridLayout!=null){thisClass.layoutJSON=JSON.parse(thisClass.e2xml.settings.properties.gridLayout);}};thisClass.render=function(redraw,mfpage){if(thisClass.GENONLY){return;}if(!thisClass.RENDER){return;}if(redraw==null){redraw=true;}MF_ComponentUtils.setDimensions(thisClass,thisClass.ecoordinates,thisClass.esize);thisClass.getValues();var layoutCode="";var cwidth=thisClass.width+(thisClass.delta*2);var cheight=thisClass.height+(thisClass.delta*2);var ctop=thisClass.y-thisClass.delta;var cleft=thisClass.x-thisClass.delta;if(redraw){$("#"+thisClass.eid).remove();layoutCode+="<div class='mfWFCompCls' id=\""+thisClass.eid+'" style="-webkit-transform: translateZ(0); box-sizing: border-box;   padding: 0px;  margin: 0px; background: #FFFFFF; position:absolute; width:'+(cwidth).toString()+"px; height:"+(cheight).toString()+"px; top:"+(ctop).toString()+"px; left:"+(cleft).toString()+'px; " > ';if(thisClass.layoutJSON!=null&&thisClass.layoutJSON.hasOwnProperty("gridLayout")&&thisClass.layoutJSON.gridLayout!=null){layoutCode+=thisClass.getLayoutCode(thisClass.layoutJSON.gridLayout);}layoutCode=layoutCode+"</div>";if(mfpage){$("#mfPage"+mfpage.eid).append(layoutCode);}else{$("#mfPage"+mf_main.editorController.page.eid).append(layoutCode);}try{mf_main.editorController.postAddToPage(thisClass.eid);}catch(e){}}else{$("#"+thisClass.eid).css("left",cleft);$("#"+thisClass.eid).css("top",ctop);$("#"+thisClass.eid).css("width",cwidth);$("#"+thisClass.eid).css("height",cheight);$("#"+thisClass.eid).empty();if(thisClass.layoutJSON!=null&&thisClass.layoutJSON.hasOwnProperty("gridLayout")&&thisClass.layoutJSON.gridLayout!=null){$("#"+thisClass.eid).append(thisClass.getLayoutCode(thisClass.layoutJSON.gridLayout));}}MF_Utils.rotate(thisClass.eid,thisClass.eangle);if(thisClass.selector){thisClass.selector.transform(thisClass);}};this.getLayoutCode=function(layoutItem){var htmlCode="";var totalWidth=0;var totalHeight=0;var totalWidthPercentage=0;var totalHeightPercentage=0;var totalWidthPixel=0;var totalHeightPixel=0;var isAllVertical=true;for(var i=0;i<layoutItem.length;i++){if(layoutItem[i].widthUnit=="px"){totalWidthPixel+=parseInt(layoutItem[i].widthValue);}else{totalWidthPercentage+=parseInt(layoutItem[i].widthValue);}if(layoutItem[i].heightUnit=="px"){totalHeightPixel+=parseInt(layoutItem[i].heightValue);}else{totalHeightPercentage+=parseInt(layoutItem[i].heightValue);}if(layoutItem[i].type=="horizontal"){isAllVertical=false;}}for(var i=0;i<layoutItem.length;i++){var itemWidth=0;if(layoutItem[i].widthUnit=="px"){itemWidth=parseInt(layoutItem[i].widthValue)+"px";}else{itemWidth="100%";if(isAllVertical&&layoutItem[i].type=="vertical"){if(totalWidthPixel>0){var percentageConvertedWidth=((parseInt(layoutItem[i].widthValue)/totalWidthPercentage)*100);itemWidth="calc((100% - "+totalWidthPixel+"px) * ("+percentageConvertedWidth+" / 100))";}else{itemWidth=((parseInt(layoutItem[i].widthValue)/totalWidthPercentage)*100)+"%";}}}var itemHeight=0;if(layoutItem[i].heightUnit=="px"){itemHeight=parseInt(layoutItem[i].heightValue)+"px";}else{var percentageConvertedHeight=((parseInt(layoutItem[i].heightValue)/totalHeightPercentage)*100);itemHeight="calc((100% - "+totalHeightPixel+"px) * ("+percentageConvertedHeight+" / 100))";if(isAllVertical&&layoutItem[i].type=="vertical"){itemHeight="100%";}}var borderCode="";if(layoutItem[i].border){borderCode="outline: 1px solid #000;";}htmlCode=htmlCode+"<div class='mfGridBuilderRenderNode_"+thisClass.eid+"' data-nodeid='"+layoutItem[i].id+"' style='float: left; width: "+itemWidth+"; height: "+itemHeight+"; "+borderCode+" overflow: hidden;'>";if(layoutItem[i].children.length>0){htmlCode=htmlCode+thisClass.getLayoutCode(layoutItem[i].children);}htmlCode=htmlCode+"</div>";}return htmlCode;};}function MF_GridSettings(){var thisClass=this;thisClass.eid=mf_main.editorController.guidGenerator();thisClass.transformLock=false;thisClass.component=null;thisClass.selector=null;thisClass.RENDERDOM=true;thisClass.showSetting=true;thisClass.transformSettings=null;thisClass.linkSettings=null;thisClass.gridBuilder=null;thisClass.remove=function(delSet){$("#"+thisClass.eid).hide();if(thisClass.gridBuilder){thisClass.gridBuilder.remove();}if(delSet){try{if(mf_main.MEMFREE){thisClass.transformSettings.remove();thisClass.linkSettings.remove();thisClass.gridBuilder.remove();}}catch(e){console.log("error occured in the component MF_Grid.js");}$("#"+thisClass.eid).remove();}};thisClass.setValues=function(){if(thisClass.RENDERDOM){thisClass.render();thisClass.transformSettings=new MF_TransformSettings();thisClass.transformSettings.init(thisClass);thisClass.linkSettings=new MF_LinkSettings();thisClass.linkSettings.init(thisClass);if(typeof MF_GridBuilder=="undefined"){var loadFiles=[];if(MF_Global.getS3Bucket()!="testmfassets"){loadFiles=["modules/gridbuilder/js/internal/gridbuilder-min.js"];}else{loadFiles.push("modules/gridbuilder/js/internal/gridbuilder.js");}$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href","modules/gridbuilder/css/internal/gridbuilder.css");MF_Utils.loadsScripts(loadFiles).then(function(){thisClass.gridBuilder=new MF_GridBuilder();thisClass.gridBuilder.init(thisClass);});}else{thisClass.gridBuilder=new MF_GridBuilder();thisClass.gridBuilder.init(thisClass);}}else{thisClass.transformSettings.init(thisClass);thisClass.linkSettings.init(thisClass);thisClass.gridBuilder.init(thisClass);thisClass.setupEvents();$("#"+thisClass.eid).show();}};thisClass.updateTransform=function(noscale){thisClass.transformSettings.updateTransform(noscale);};thisClass.setupEvents=function(){if(thisClass.RENDERDOM==true){thisClass.RENDERDOM=false;}};thisClass.render=function(redraw,mfpage){if(redraw==null){redraw=true;}var htmlCode="";if(redraw){$("#"+thisClass.eid).remove();htmlCode=multiline(function(){
/*!
				
					
					<div class="mfComponentSetting" id="{{eid}}" style=" position: relative; display: none; width:250px; height: auto; overflow: hidden; " >
					<div  style="overflow: hidden;  width:100%; height: 100%;" >
					
					
					
						<div id="{{eid}}_transform"  style="overflow: hidden; width:100%; " >
							
						</div>
						
						<div id="{{eid}}_link"  style="overflow: hidden; width:100%; " >
							
						</div>
						
						<div id="{{eid}}_gridbuilder"  style="overflow: hidden; width:100%; " >
							
						</div>
					
					
					
					</div></div>
					
				
				*/
console.log;});var compiled_template=Handlebars.compile(htmlCode);var context={eid:thisClass.eid};var compiled_code=compiled_template(context);$("#mfComponentSettings").append(compiled_code);thisClass.setupEvents();$("#"+thisClass.eid).show();}else{$("#"+thisClass.eid).css("left",thisClass.x);$("#"+thisClass.eid).css("top",thisClass.y);}};}